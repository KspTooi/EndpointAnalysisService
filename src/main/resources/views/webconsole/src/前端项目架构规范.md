# **前端项目目录结构规范**

本项目架构设计遵循 **“分层架构 (Layered Architecture)”** 与 **“特性分包 (Package by Feature)”** 相结合的原则。

* **顶层目录**：按技术职能划分（如 api, components, views），提供全局公共能力。
* **业务目录** (src/views/xxx)：按业务领域划分，实现高内聚的模块化设计。

## **1\. 全局架构概览 (Global Scope)**

src/ 下的顶层目录主要用于存放**跨业务复用**的代码。  
src/  
├── api/                \# \[全局数据层\] 公共基础接口 (如 Auth, User, Upload)  
├── assets/             \# \[全局资源\] 静态资源 (图片, 字体, 全局样式)  
├── commons/             \# \[全局工具\] 纯函数工具库 (如 http 封装, dateUtil)   
├── components/         \# \[全局视图层\] 通用 UI 组件 (如自定义 Button, 通用 Layout)   
├── router/             \# \[全局路由\] 路由配置   
├── service/            \# \[全局逻辑层\] 通用 Composables (如 useTheme, useWindowSize)  
├── store/              \# \[全局状态\] 跨模块状态管理 (Pinia, 如 UserInfo, AppSettings)  
└── views/              \# \[业务模块\] 所有业务页面的入口  
────├── drive/          \# \-\> 云盘业务模块   
────├── user/           \# \-\> 用户中心模块  
────└── admin/          \# \-\> 后台管理模块

### **⚠️ 关键原则：全局 vs 局部**

| 类别 | 放入全局 (src/xxx) | 放入业务模块 (src/views/xxx/xxx) |
| :---- | :---- | :---- |
| **API** | 多个模块共用的接口（如获取当前用户信息、文件上传基础接口）。 | **绝大多数接口**。只被当前业务使用的接口（如“移动文件”、“创建文件夹”）。 |
| **组件** | 纯 UI 组件，不含业务逻辑，可在任何地方复用（如“图标选择器”）。 | 业务组件，包含特定业务逻辑（如“云盘文件列表”、“文件重命名弹窗”）。 |
| **状态** | 需要跨页面共享的数据（如 Token、用户信息、全局主题）。 | 页面级状态。只在当前页面或其子组件中共享的数据。 |

## **2\. 业务模块内部结构 (Feature Scope)**

在 src/views/ 下的每个文件夹代表一个独立的业务域（Domain）。以云盘 (drive) 模块为例，它就像一个微型应用，拥有自己的完整分层。  
src/views/drive/  
├── api/                        \# \[模块数据层\]   
│   └── DriveApi.ts             \# 该模块独有的 API 请求及 TS 类型定义  
│  
├── components/                 \# \[模块视图层\]   
│   ├── DriveEntryGrid.vue      \# 业务组件：文件列表  
│   ├── DriveEntryRightMenu.vue \# 业务组件：右键菜单  
│   └── ...  
│  
├── service/                    \# \[模块逻辑层\]   
│   ├── DriveService.ts         \# 核心业务逻辑 (删除/复制/粘贴)  
│   ├── DriveEntryGridService.ts\# 交互逻辑 (拖拽/框选)  
│   └── ...  
│  
├── workers/                    \# \[模块任务层\]   
│   └── sha256.worker.ts        \# 模块独有的 Worker  
│  
└── Drive.vue                   \# \[模块入口\]   
\# 负责组装 Service 和 Components

### **目录职责详述**

| 目录/文件 | 职责说明 |
| :---- | :---- |
| **api/** | **只负责数据**。存放 Axios 请求封装和 TypeScript 类型定义，不含业务逻辑。 |
| **components/** | **只负责渲染**。存放该模块私有的 Vue 组件，接收 props 并通过 emit 抛出事件。 |
| **service/** | **只负责逻辑**。封装状态管理 (ref/reactive) 和业务规则，作为 API 和组件的桥梁。 |
| **workers/** | **负责后台计算**。存放 Web Worker，用于处理耗时任务以免阻塞 UI。 |
| **Drive.vue** | **负责组装**。作为控制器 (Controller)，引入 Service 获取数据和方法，绑定到 Components 上。 |

